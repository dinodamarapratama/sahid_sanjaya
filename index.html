<!DOCTYPE HTML>
<html>
	<head>
		<title></title>
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<script type="application/x-javascript"> addEventListener("load", function() { setTimeout(hideURLbar, 0); }, false); function hideURLbar(){ window.scrollTo(0,1); } </script>
		</script>
		<link href="css/bootstrap.css" rel='stylesheet' type='text/css' />
	    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
		<script type="text/javascript" src="js/gmaps.js"></script>
		<script charset="utf-8" src="js/apiomat.js"></script>
		<script src="js/jquery.min.js"></script>
		<link href="css/style.css" rel='stylesheet' type='text/css' />
		<link href="css/animate.css" rel="stylesheet" type="text/css" media="all">
		<script src="js/wow.min.js"></script>
		<script>
		 new WOW().init();
		</script>
		<link href='http://fonts.googleapis.com/css?family=Roboto:400,100,300,500,700,900' rel='stylesheet' type='text/css'>
		<script>
			$(function() {
				var pull 		= $('#pull');
					menu 		= $('nav ul');
					menuHeight	= menu.height();
				$(pull).on('click', function(e) {
					e.preventDefault();
					menu.slideToggle();
				});
				$(window).resize(function(){
	        		var w = $(window).width();
	        		if(w > 320 && menu.is(':hidden')) {
	        			menu.removeAttr('style');
	        		}
	    		});
			});
		</script>
	</head>
	<body onload="init()">
		<div class="bg">
		<!----- start-header---->
		<div class="container">
			<div id="home" class="header wow bounceInDown" data-wow-delay="0.4s">
					<div class="top-header">
						<div class="logo">
							<a href="index.html">Wisata Kuliner Bogor</a>
						</div>
						<!----start-top-nav---->
						 <nav class="top-nav">
							<ul class="top-nav">
							<li><a href="index.html" class="scroll">Peta</a></li>
								<li><a href="informasi.html" class="scroll">Informasi</a></li>
								<li><a href="rute.html" class="scroll">Rute</a></li>
							</ul>
							<a href="#" id="pull"><img src="images/nav-icon.png" title="menu" /></a>
						</nav>
						<div class="clearfix"> </div>
					</div>
				</div>
			</div>
			<!----- //End-header---->
			<!---- banner-info ---->
			<div class="banner-info">
				<div class="container">
					<h1 class="wow fadeIn" data-wow-delay="0.5s"><span>Kenali</span><br /><label>& Cintai</label></h1>
				</div>
			</div>
			<div class="clearfix"> </div>
		</div>
		<!---- banner-info ---->
			

<br>
<div id="mapCanvas"></div>
<br><br>

<div class="clearfix"></div>	
<script type="text/javascript">

	var map;
	
    function init() {
        var user = new Apiomat.User();
        user.setUserName("Admin");
        user.setPassword("12345");
        Apiomat.Datastore.configure(user);
        var saveCB = {
            onOk: function() {
            
            },
            onError: function(error) {
            }
        };
        user.loadMe({
            onOk: function() {
                loadTask();
            },
            onError: function(error) {
                user.save(saveCB);

            }
        });
    }
	
	
	
	
		
	function loadTask() {
	map = new GMaps({
    div: '#mapCanvas',
    lat: 0,
    lng: 52,
    zoom: 9,
    width: '100%',
    height: '280px',
	icon: "images/marker.png"
    });
	//map.removeMarkers();
        Apiomat.Kuliner.getKuliners(undefined, {
            onOk: function(data) {
                for (var i = 0; i < data.length; i++) {
                    
					
                    map.setCenter(-6.59715, 106.80604);
                    map.addMarker({
                    lat: data[i].getLatitude(),
                    lng: data[i].getLongitude(),
                    title: "",
					icon: "images/marker.png",
                    infoWindow: {
                       content: "<div><b><a  href='rincian.html?id="+data[i].getID()+"' >"+data[i].getNama_kuliner()+"</a></b></div><div>"+data[i].getAlamat()+"</div>"  
                    }  
                });
                }
            },
            onError: function(error) {
                status.innerHTML = "Can't load list: " + error.statusCode + " --> " + error.message;
            }
        });
    }
	
	function loadOption() {
	document.getElementById('listMarker').innerHTML = ""
    var option  = $('#optionMarker input:radio:checked').val(); 
    if (option == "all") {
	map.removeMarkers();
        Apiomat.Kuliner.getKuliners(undefined, {
            onOk: function(data) {
                for (var i = 0; i < data.length; i++) {
                    document.getElementById('listMarker').innerHTML += "<div class='grid'><h3 class='frist'>"+data[i].getNama_perusahaan()+"</h3><p>"+data[i].getAlamat()+"</p><a>"+data[i].getKota()+"</a></div>";
                    map.setCenter(-6.209610, 106.845997);
                    map.addMarker({
                    lat: data[i].getLatitude(),
                    lng: data[i].getLongitude(),
                    title: "",
					icon: "images/marker.png",
                    infoWindow: {
                       content: "<div style='width: 100%;margin-bottom:5px;height: 15px;float: left;color: #000;font-size:12px;font-weight:bold;'><strong><b>"+data[i].getNama_perusahaan()+"</b></strong></div><div style='clear:both;height:0px;'><div style='float:left;width:100%'><div style='color:#666;font-size:12px;font-weight:bold;	'> <div style='padding: 0px;'>"+data[i].getAlamat()+"</div></div></div></div>"
					   
                    }  
                });
                }
            },
            onError: function(error) {
                status.innerHTML = "Can't load list: " + error.statusCode + " --> " + error.message;
            }
        });
	
	}
	else {
	map.removeMarkers();
	var y = "kota==" + '"' + option + '"'  ; 
        Apiomat.Kuliner.getKuliners(y, {
            onOk: function(data) {
                for (var i = 0; i < data.length; i++) {
                    document.getElementById('listMarker').innerHTML += "<div class='grid'><h3 class='frist'>"+data[i].getNama_perusahaan()+"</h3><p>"+data[i].getAlamat()+"</p><a>"+data[i].getKota()+"</a></div>";
                    map.setCenter(-6.209610, 106.845997);
                    map.addMarker({
                    lat: data[i].getLatitude(),
                    lng: data[i].getLongitude(),
                    title: "",
					icon: "images/marker.png",
                    infoWindow: {
                       content: "<div style='width: 100%;margin-bottom:5px;height: 15px;float: left;color: #000;font-size:12px;font-weight:bold;'><strong><b>"+data[i].getNama_perusahaan()+"</b></strong></div><div style='clear:both;height:0px;'><div style='float:left;width:100%'><div style='color:#666;font-size:12px;font-weight:bold;	'> <div style='padding: 0px;'>"+data[i].getAlamat()+"</div></div></div></div>"
					   
                    }  
                });
                }
            },
            onError: function(error) {
                status.innerHTML = "Can't load list: " + error.statusCode + " --> " + error.message;
            }
        });
		
		}
    }

</script>
	</body>
</html>

